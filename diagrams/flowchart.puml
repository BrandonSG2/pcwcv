@startuml
title Flujo de Conteo de Personas (IN / OUT)

start

:Inicio del sistema;

:Capturar imagen con cámara;

:Detectar cambios en la imagen;

if (Imagen cambió?) then (Sí)
    :Enviar imagen al servidor;
    :Enviar ID del celular (IN / OUT);
    -> Servidor
else (No)
    :Esperar nueva captura;
    stop
endif

partition "Servidor (Flask + Python)" {
    :Recibir imagen e ID del celular;
    :Procesar imagen (detección de personas);

    if (¿Se detectó alguna persona?) then (Sí)
        :Actualizar conteo;
        :Generar registro con:
        - Timestamp UTC
        - Dirección (IN/OUT)
        - Cantidad detectada
    else (No)
        :No hay personas detectadas;
    endif
}

:Fin del flujo;
stop
@enduml
